package adventofcode.aoc2023.day8;


import java.util.HashMap;
import java.util.Map;

public class Main {

    static String s = "RL\n" +
            "AAA = (BBB, CCC)\n" +
            "BBB = (DDD, EEE)\n" +
            "CCC = (ZZZ, GGG)\n" +
            "DDD = (DDD, DDD)\n" +
            "EEE = (EEE, EEE)\n" +
            "GGG = (GGG, GGG)\n" +
            "ZZZ = (ZZZ, ZZZ)";

    static String s1 = "LLR\n" +
            "AAA = (BBB, BBB)\n" +
            "BBB = (AAA, ZZZ)\n" +
            "ZZZ = (ZZZ, ZZZ)";

    static String sq = "LLLLLLLRRRLRRRLRLRLRLRRLLRRRLRLLRRRLLRRLRRLRRLRLRRLRLRRRLRRLRLRRRLRRLRRLRLRRLLRLLRLRRRLRRLRLLLLRRLLLLRLRLRLRRRLRLRLLLRLRRRLRRRLRRRLRLRRLRRRLRLLLRLLRRLRRRLRRLRRLRRLRLRRRLRLRLRLLRRRLRRRLRRLRRRLLLRRLRRLRRRLRLRRRLRRRLRLRRLRRRLRLRRLRLRRLRRRLRLRRLRLLRRRLLRLRRLRRRLLLRLRRLRRRR\n" +
            "DGK = (KVQ, XHR)\n" +
            "KTC = (TVB, MTH)\n" +
            "CGR = (VVK, BKP)\n" +
            "LCG = (FQC, KHX)\n" +
            "PSZ = (FSF, QSM)\n" +
            "FBJ = (FHP, SPX)\n" +
            "KJD = (NRQ, VDH)\n" +
            "NCM = (JPJ, KNG)\n" +
            "TXH = (HNK, VHQ)\n" +
            "NND = (TRC, DFM)\n" +
            "JQN = (CNX, XLD)\n" +
            "RHB = (CDG, GBT)\n" +
            "JBN = (PXV, GVN)\n" +
            "DFC = (JRN, TXH)\n" +
            "TXG = (CHT, VBL)\n" +
            "XXQ = (JDC, JGV)\n" +
            "SVF = (FVD, LHQ)\n" +
            "FVK = (LCG, RNB)\n" +
            "XKT = (MPF, XJJ)\n" +
            "MHB = (JSJ, VQM)\n" +
            "FVC = (HXF, VVN)\n" +
            "JJR = (VNS, SLM)\n" +
            "RMT = (GDS, XHP)\n" +
            "CHT = (PXS, VLF)\n" +
            "SFJ = (XGC, LPM)\n" +
            "BJL = (XDN, VXN)\n" +
            "PQK = (NHS, DVB)\n" +
            "PDB = (JPQ, TVJ)\n" +
            "RGL = (DNN, NCN)\n" +
            "KRN = (SBL, PHL)\n" +
            "MTF = (PJL, KQR)\n" +
            "BTL = (CCF, LDP)\n" +
            "NLV = (CPM, HVL)\n" +
            "GCQ = (QMF, JVH)\n" +
            "KVH = (VKD, PQG)\n" +
            "RLB = (GSS, JVP)\n" +
            "QRB = (TNL, DKN)\n" +
            "JFV = (RDR, NSB)\n" +
            "BFC = (LGH, XLX)\n" +
            "HGQ = (SLM, VNS)\n" +
            "FQC = (VFQ, BXC)\n" +
            "DDS = (XHR, KVQ)\n" +
            "VQV = (SFT, BFQ)\n" +
            "XFD = (HVV, FLH)\n" +
            "TVP = (XQF, KSS)\n" +
            "GBH = (NPX, LDB)\n" +
            "KHL = (MGS, MMD)\n" +
            "NPX = (BJL, SFF)\n" +
            "VMG = (DHX, GVC)\n" +
            "RTJ = (XRF, BPK)\n" +
            "TLM = (NCG, QBB)\n" +
            "LXS = (TVB, MTH)\n" +
            "XNM = (QFL, KQK)\n" +
            "KQR = (QRD, JBN)\n" +
            "JQD = (DNN, NCN)\n" +
            "QCF = (MXL, MXL)\n" +
            "QMH = (NKG, SDJ)\n" +
            "NKK = (MCB, RLB)\n" +
            "MPJ = (BTL, JTF)\n" +
            "TLS = (VPJ, LMD)\n" +
            "XJB = (LML, TKZ)\n" +
            "HGF = (HBF, QHB)\n" +
            "KNJ = (QKM, XLR)\n" +
            "XCF = (QCJ, HTN)\n" +
            "HFS = (NKC, JFV)\n" +
            "QLS = (QBB, NCG)\n" +
            "QFL = (NXQ, QBN)\n" +
            "MTH = (FLN, LQR)\n" +
            "VND = (KMM, MQH)\n" +
            "NQQ = (VVH, NDL)\n" +
            "BTV = (QSM, FSF)\n" +
            "SLT = (NRQ, VDH)\n" +
            "NKG = (TBV, XCV)\n" +
            "SLM = (LBN, HPK)\n" +
            "CMQ = (KKS, VBH)\n" +
            "JTF = (LDP, CCF)\n" +
            "VFC = (GKH, KPS)\n" +
            "KCC = (JVM, MTF)\n" +
            "KFP = (MVX, NMX)\n" +
            "NQF = (QSK, KCC)\n" +
            "GGC = (VBV, TJR)\n" +
            "QQS = (NKK, NQC)\n" +
            "LXK = (FXC, QBC)\n" +
            "DVQ = (TFF, LKB)\n" +
            "PBL = (BGQ, FHQ)\n" +
            "KHV = (BVJ, XSD)\n" +
            "LDB = (SFF, BJL)\n" +
            "RJG = (LJB, CJM)\n" +
            "RCX = (QTB, PPL)\n" +
            "FLH = (HSX, KVX)\n" +
            "XTV = (HST, VCC)\n" +
            "GDC = (CMH, NCT)\n" +
            "RDP = (FKR, GHJ)\n" +
            "NXM = (PVV, KRX)\n" +
            "SCQ = (MFN, GRB)\n" +
            "MRT = (XGT, VLK)\n" +
            "DHJ = (XHP, GDS)\n" +
            "XFL = (TJK, QMH)\n" +
            "XQF = (CCQ, RPH)\n" +
            "CLV = (CKD, CCD)\n" +
            "CMT = (NCD, XDM)\n" +
            "NCT = (SXG, CLF)\n" +
            "JSS = (GMJ, LJC)\n" +
            "TLQ = (CRC, DXQ)\n" +
            "DMJ = (HHB, DRV)\n" +
            "JBH = (FVC, HDX)\n" +
            "QXK = (QSB, JBH)\n" +
            "DQN = (QMD, GDN)\n" +
            "SDH = (PRH, BCX)\n" +
            "QSB = (HDX, FVC)\n" +
            "MTP = (VVG, SPN)\n" +
            "CTM = (MFG, GGJ)\n" +
            "HND = (MNV, TXG)\n" +
            "MJS = (DMJ, QQG)\n" +
            "JNL = (LKB, TFF)\n" +
            "QLL = (FKM, HNH)\n" +
            "PNM = (PQR, NRL)\n" +
            "VSF = (LPM, XGC)\n" +
            "QBC = (QQS, MVF)\n" +
            "BFM = (FBP, BQJ)\n" +
            "KNG = (RTJ, CXN)\n" +
            "VFQ = (HFS, LBS)\n" +
            "LKB = (QVB, TXF)\n" +
            "KQD = (CDJ, CDJ)\n" +
            "ZZZ = (DHJ, RMT)\n" +
            "XKX = (HVP, NJF)\n" +
            "GSL = (QMS, DHM)\n" +
            "PNT = (CDJ, GJZ)\n" +
            "KBN = (CMQ, JBG)\n" +
            "DNX = (SFM, GFJ)\n" +
            "NMX = (XRR, LKL)\n" +
            "VPJ = (PSK, GQL)\n" +
            "XQD = (QCF, QCF)\n" +
            "HRM = (RHB, XXJ)\n" +
            "LCL = (MRT, FMB)\n" +
            "DRG = (RNB, LCG)\n" +
            "BKP = (QLL, MMQ)\n" +
            "FSF = (SLR, XGV)\n" +
            "KHX = (BXC, VFQ)\n" +
            "SXG = (NHL, KGK)\n" +
            "MJD = (TDH, RFP)\n" +
            "NRL = (CSG, MPT)\n" +
            "FBP = (QGC, GXH)\n" +
            "HDT = (LHQ, FVD)\n" +
            "BMP = (RMG, JXM)\n" +
            "NCN = (SLT, KJD)\n" +
            "NXQ = (JPP, QQL)\n" +
            "NGV = (HNJ, VVQ)\n" +
            "NPN = (MXL, NJK)\n" +
            "FVD = (XBQ, NKF)\n" +
            "GQM = (QCG, GGC)\n" +
            "QBP = (XML, HND)\n" +
            "VQT = (BTL, JTF)\n" +
            "HKP = (CMH, NCT)\n" +
            "JHP = (NDL, VVH)\n" +
            "FRL = (SHD, FNH)\n" +
            "FLN = (NVL, HGF)\n" +
            "MXH = (QSD, KKR)\n" +
            "BGL = (XCX, RFC)\n" +
            "RSQ = (MKH, TLS)\n" +
            "VML = (RJM, CXK)\n" +
            "XHP = (MJS, DNP)\n" +
            "GRV = (XRN, TVQ)\n" +
            "GKH = (BCF, VSD)\n" +
            "SPH = (MVX, NMX)\n" +
            "TLD = (LFR, GFQ)\n" +
            "LML = (QKS, NND)\n" +
            "PKT = (VXC, CMF)\n" +
            "LLQ = (THT, GRV)\n" +
            "CKD = (SPB, QDV)\n" +
            "KRM = (JQV, JNG)\n" +
            "RNS = (HJJ, MLV)\n" +
            "FKR = (FKK, BHN)\n" +
            "XNH = (SCQ, KLF)\n" +
            "GDN = (LBL, FHT)\n" +
            "CRB = (NHQ, QRB)\n" +
            "JKQ = (DPT, KBN)\n" +
            "NJF = (RJG, NGF)\n" +
            "NRT = (NSK, CSL)\n" +
            "LJR = (VTT, HCQ)\n" +
            "HLK = (DFC, DPV)\n" +
            "PQR = (MPT, CSG)\n" +
            "DNF = (NJF, HVP)\n" +
            "MPV = (HJD, XSF)\n" +
            "TBV = (XTJ, SVH)\n" +
            "LKX = (XFJ, HBM)\n" +
            "KTP = (CGR, RVR)\n" +
            "HVL = (BJH, QXK)\n" +
            "GJD = (XJJ, MPF)\n" +
            "HLC = (VVQ, HNJ)\n" +
            "JTX = (NCD, XDM)\n" +
            "CSG = (MFF, RKT)\n" +
            "PCH = (PGJ, GQM)\n" +
            "SFF = (VXN, XDN)\n" +
            "TCF = (KNG, JPJ)\n" +
            "LDP = (XFD, SBS)\n" +
            "XCR = (GJD, XKT)\n" +
            "QBM = (GFB, LRH)\n" +
            "CLP = (RJM, CXK)\n" +
            "MTT = (HST, VCC)\n" +
            "TQL = (BPM, GGT)\n" +
            "LFR = (HNF, RDP)\n" +
            "JHN = (CMT, JTX)\n" +
            "XCX = (CHG, CHG)\n" +
            "XGT = (HLK, QJF)\n" +
            "TQS = (TKL, MNF)\n" +
            "KFL = (HGQ, JJR)\n" +
            "LHQ = (XBQ, NKF)\n" +
            "CCQ = (DBP, HHC)\n" +
            "TKL = (VDN, PBP)\n" +
            "LBX = (BXM, SDH)\n" +
            "XLX = (NGJ, LHJ)\n" +
            "GVN = (BPG, TNK)\n" +
            "CCX = (HCQ, VTT)\n" +
            "KQK = (QBN, NXQ)\n" +
            "NQC = (MCB, RLB)\n" +
            "MPF = (DFT, SBG)\n" +
            "BNH = (MLV, HJJ)\n" +
            "CJM = (LBH, TNM)\n" +
            "CND = (VKB, PGQ)\n" +
            "HXM = (GMJ, LJC)\n" +
            "TKZ = (NND, QKS)\n" +
            "RKT = (LNQ, KFL)\n" +
            "GXH = (RQP, LBX)\n" +
            "TFF = (QVB, TXF)\n" +
            "LNK = (FDC, MXH)\n" +
            "KPK = (BNH, RNS)\n" +
            "QQG = (HHB, DRV)\n" +
            "MFP = (PQK, NBF)\n" +
            "VVK = (QLL, MMQ)\n" +
            "GFB = (RHN, LCN)\n" +
            "PPD = (QCJ, HTN)\n" +
            "FXV = (BPM, GGT)\n" +
            "KSS = (CCQ, RPH)\n" +
            "KCM = (LTB, PCH)\n" +
            "RHN = (FXV, TQL)\n" +
            "LFV = (DDJ, NQF)\n" +
            "JKG = (BGQ, FHQ)\n" +
            "MBS = (RQJ, LDQ)\n" +
            "HHC = (NGV, HLC)\n" +
            "CCD = (QDV, SPB)\n" +
            "RFM = (FTB, HSB)\n" +
            "QCG = (VBV, TJR)\n" +
            "GRH = (LXK, LGQ)\n" +
            "CDJ = (QQJ, BFC)\n" +
            "THT = (TVQ, XRN)\n" +
            "QRD = (PXV, GVN)\n" +
            "VHQ = (SXV, GJL)\n" +
            "MLV = (VRM, MCP)\n" +
            "XRR = (CLV, PBJ)\n" +
            "NMS = (DGK, DDS)\n" +
            "JPS = (JKT, KHL)\n" +
            "DJJ = (QMS, DHM)\n" +
            "MFG = (TLQ, VQD)\n" +
            "GPQ = (SHL, BNR)\n" +
            "QVB = (GDC, HKP)\n" +
            "LNN = (CMF, VXC)\n" +
            "VBQ = (LNN, PKT)\n" +
            "MMS = (SVV, HRM)\n" +
            "BGJ = (HXM, JSS)\n" +
            "QCK = (JSJ, VQM)\n" +
            "PKB = (XNH, JQH)\n" +
            "BCF = (TQR, TLL)\n" +
            "JRN = (VHQ, HNK)\n" +
            "SHL = (DMK, JBX)\n" +
            "LRG = (NSK, CSL)\n" +
            "NJV = (FJH, TXC)\n" +
            "GHQ = (FSB, HFX)\n" +
            "LHN = (TLS, MKH)\n" +
            "HBF = (BMP, GLM)\n" +
            "DTP = (DVQ, JNL)\n" +
            "FXR = (FTB, HSB)\n" +
            "PDS = (XLD, CNX)\n" +
            "SXV = (CPC, JNF)\n" +
            "QMF = (GGF, JDP)\n" +
            "JVP = (GPC, DNX)\n" +
            "RMG = (HRF, PKB)\n" +
            "LRH = (LCN, RHN)\n" +
            "HVP = (RJG, NGF)\n" +
            "TRC = (VKX, RQL)\n" +
            "PJL = (QRD, JBN)\n" +
            "HNK = (GJL, SXV)\n" +
            "CHM = (NBF, PQK)\n" +
            "PGH = (KMM, MQH)\n" +
            "SDN = (MFP, CHM)\n" +
            "DMK = (VRP, NNX)\n" +
            "MRR = (NGK, SMQ)\n" +
            "QDV = (NDM, JPT)\n" +
            "PGJ = (QCG, GGC)\n" +
            "BVJ = (NLV, HBR)\n" +
            "PGQ = (BGK, GBH)\n" +
            "LKL = (CLV, PBJ)\n" +
            "FDC = (KKR, QSD)\n" +
            "JDP = (PDB, PTX)\n" +
            "NJJ = (HSJ, GRH)\n" +
            "TVJ = (HDT, SVF)\n" +
            "NJK = (RBV, ZZZ)\n" +
            "HHN = (DPP, TLD)\n" +
            "QMS = (BLS, TQS)\n" +
            "QVR = (CVB, BNJ)\n" +
            "FFQ = (RMJ, HGZ)\n" +
            "LGQ = (QBC, FXC)\n" +
            "JPP = (RSG, KTG)\n" +
            "DPV = (TXH, JRN)\n" +
            "HBR = (CPM, HVL)\n" +
            "NSK = (JQN, PDS)\n" +
            "SBS = (HVV, FLH)\n" +
            "BFQ = (VBQ, JPB)\n" +
            "LBN = (LXJ, CCR)\n" +
            "RBD = (KRM, PNX)\n" +
            "NQX = (LML, LML)\n" +
            "XSA = (QKS, NND)\n" +
            "NDB = (HFX, FSB)\n" +
            "QMD = (LBL, FHT)\n" +
            "XTJ = (JDT, JDT)\n" +
            "GLH = (SHL, BNR)\n" +
            "FXC = (MVF, QQS)\n" +
            "HSX = (NFN, LVG)\n" +
            "JNF = (JJH, FNR)\n" +
            "CXK = (SPC, TVP)\n" +
            "GGF = (PDB, PTX)\n" +
            "XBQ = (QNX, JCQ)\n" +
            "LJC = (SFJ, VSF)\n" +
            "MMD = (XLK, CND)\n" +
            "HFG = (JKT, KHL)\n" +
            "NHQ = (TNL, DKN)\n" +
            "JVM = (KQR, PJL)\n" +
            "CGH = (RTC, VFC)\n" +
            "HNF = (GHJ, FKR)\n" +
            "TMF = (NMS, GJH)\n" +
            "NGJ = (NXM, BDB)\n" +
            "MRM = (JKQ, MPS)\n" +
            "QTC = (JSS, HXM)\n" +
            "TNM = (JFF, QXR)\n" +
            "DHK = (LJR, CCX)\n" +
            "XSB = (MRR, CXC)\n" +
            "XRN = (XDP, QBP)\n" +
            "XCV = (XTJ, SVH)\n" +
            "VVA = (QSM, FSF)\n" +
            "NKC = (RDR, NSB)\n" +
            "MXL = (RBV, RBV)\n" +
            "PTX = (TVJ, JPQ)\n" +
            "VRL = (NQX, XJB)\n" +
            "RQK = (MPS, JKQ)\n" +
            "PBJ = (CKD, CCD)\n" +
            "VRP = (DQN, QLC)\n" +
            "KLF = (MFN, GRB)\n" +
            "XXJ = (GBT, CDG)\n" +
            "HST = (QHV, MMS)\n" +
            "SFT = (JPB, VBQ)\n" +
            "NRR = (LCL, MQR)\n" +
            "CSL = (JQN, PDS)\n" +
            "LHJ = (BDB, NXM)\n" +
            "TXK = (DHK, KLC)\n" +
            "CDK = (XCX, XCX)\n" +
            "FHT = (NGQ, JHN)\n" +
            "QQJ = (LGH, XLX)\n" +
            "BQJ = (GXH, QGC)\n" +
            "TTA = (QKM, XLR)\n" +
            "TVB = (FLN, LQR)\n" +
            "PPL = (FRL, NCX)\n" +
            "SPS = (XFJ, HBM)\n" +
            "SVH = (JDT, VRL)\n" +
            "QBB = (PXG, MTP)\n" +
            "JSJ = (VVB, NRR)\n" +
            "KKS = (RGL, JQD)\n" +
            "JDT = (NQX, NQX)\n" +
            "GKQ = (LLT, JRH)\n" +
            "VVH = (BPT, KRN)\n" +
            "JCQ = (CRB, PBS)\n" +
            "QXR = (BTV, PSZ)\n" +
            "VQR = (RCX, KKP)\n" +
            "QSM = (SLR, XGV)\n" +
            "JKD = (JDC, JGV)\n" +
            "XLD = (LFS, QVR)\n" +
            "TJK = (NKG, SDJ)\n" +
            "PVV = (HDK, VQV)\n" +
            "BDB = (PVV, KRX)\n" +
            "MPS = (KBN, DPT)\n" +
            "FHP = (PPD, XCF)\n" +
            "HTN = (KCM, PXC)\n" +
            "GHJ = (BHN, FKK)\n" +
            "JCC = (LQM, KVH)\n" +
            "LQR = (HGF, NVL)\n" +
            "LGM = (DDJ, NQF)\n" +
            "NJN = (QCF, NPN)\n" +
            "PRH = (DFF, DFF)\n" +
            "XDM = (FBJ, PJM)\n" +
            "HFN = (KRS, XSB)\n" +
            "GLM = (JXM, RMG)\n" +
            "RQP = (BXM, SDH)\n" +
            "BPG = (QJT, KTP)\n" +
            "JPB = (LNN, PKT)\n" +
            "DKN = (CJD, BGR)\n" +
            "CDG = (GSL, DJJ)\n" +
            "XDN = (CGM, VMG)\n" +
            "NQP = (SKT, JCC)\n" +
            "DNP = (QQG, DMJ)\n" +
            "NNX = (DQN, QLC)\n" +
            "FTB = (JFL, VJJ)\n" +
            "FHQ = (SMJ, XFK)\n" +
            "GGT = (KPK, LNT)\n" +
            "NGF = (LJB, CJM)\n" +
            "QFX = (KCN, TMF)\n" +
            "NKF = (JCQ, QNX)\n" +
            "DBP = (NGV, HLC)\n" +
            "RBV = (RMT, DHJ)\n" +
            "NML = (MBV, VCG)\n" +
            "KXJ = (MXH, FDC)\n" +
            "GFQ = (RDP, HNF)\n" +
            "SHD = (CMG, CTM)\n" +
            "GTX = (LNK, KXJ)\n" +
            "HXF = (KTC, LXS)\n" +
            "CMM = (NQP, SBR)\n" +
            "SDJ = (TBV, XCV)\n" +
            "CHG = (RMJ, RMJ)\n" +
            "DPT = (CMQ, JBG)\n" +
            "BGR = (RLM, NML)\n" +
            "THM = (XQD, NJN)\n" +
            "HJJ = (MCP, VRM)\n" +
            "NRQ = (JHR, GCQ)\n" +
            "KKR = (HSN, NJJ)\n" +
            "KVX = (LVG, NFN)\n" +
            "LTT = (TLD, DPP)\n" +
            "NVL = (QHB, HBF)\n" +
            "CXN = (XRF, BPK)\n" +
            "KLC = (CCX, LJR)\n" +
            "JDC = (DNF, XKX)\n" +
            "MGS = (XLK, CND)\n" +
            "RLM = (VCG, MBV)\n" +
            "VDN = (NMQ, TPR)\n" +
            "HSB = (JFL, VJJ)\n" +
            "HDS = (KLC, DHK)\n" +
            "XSD = (NLV, HBR)\n" +
            "HJD = (NJQ, PBQ)\n" +
            "CGM = (DHX, GVC)\n" +
            "LDQ = (PBL, JKG)\n" +
            "RDR = (XHQ, MGQ)\n" +
            "GPC = (GFJ, SFM)\n" +
            "NQT = (KRS, XSB)\n" +
            "TDH = (RBD, XLP)\n" +
            "QJF = (DFC, DPV)\n" +
            "VNS = (HPK, LBN)\n" +
            "QSD = (NJJ, HSN)\n" +
            "JHR = (QMF, JVH)\n" +
            "SMQ = (FXR, RFM)\n" +
            "CMG = (MFG, GGJ)\n" +
            "NKQ = (VFC, RTC)\n" +
            "VXC = (LHN, RSQ)\n" +
            "DHX = (LCT, XNM)\n" +
            "TCX = (NQT, HFN)\n" +
            "DRV = (TFN, QBM)\n" +
            "JPT = (GQX, XCR)\n" +
            "HRF = (JQH, XNH)\n" +
            "MCS = (BGJ, QTC)\n" +
            "PQG = (NCM, TCF)\n" +
            "XHR = (PJK, VPN)\n" +
            "MLX = (PGH, VND)\n" +
            "MKH = (VPJ, LMD)\n" +
            "TJR = (VQT, MPJ)\n" +
            "VLF = (GLG, QFX)\n" +
            "JNG = (KLR, MPV)\n" +
            "HDK = (BFQ, SFT)\n" +
            "HFX = (MLX, SPL)\n" +
            "BXC = (HFS, LBS)\n" +
            "CCT = (GTX, HPT)\n" +
            "VLK = (HLK, QJF)\n" +
            "NCD = (PJM, FBJ)\n" +
            "VGT = (JNL, DVQ)\n" +
            "LMD = (PSK, GQL)\n" +
            "KRX = (HDK, VQV)\n" +
            "QNX = (CRB, PBS)\n" +
            "NJQ = (GHQ, NDB)\n" +
            "TNV = (FBP, BQJ)\n" +
            "GNR = (XQD, NJN)\n" +
            "KKP = (QTB, PPL)\n" +
            "DBX = (KCQ, CPS)\n" +
            "VRM = (TLM, QLS)\n" +
            "LVG = (BRP, NJV)\n" +
            "NHL = (SPS, LKX)\n" +
            "MNV = (VBL, CHT)\n" +
            "PJK = (HHN, LTT)\n" +
            "VBH = (JQD, RGL)\n" +
            "GRB = (NKQ, CGH)\n" +
            "SKT = (KVH, LQM)\n" +
            "TPR = (RXR, KHV)\n" +
            "VVB = (LCL, MQR)\n" +
            "VKX = (MRM, RQK)\n" +
            "LTB = (PGJ, GQM)\n" +
            "QCJ = (KCM, PXC)\n" +
            "BGQ = (SMJ, SMJ)\n" +
            "RCV = (NQQ, JHP)\n" +
            "DHM = (TQS, BLS)\n" +
            "KRS = (CXC, MRR)\n" +
            "JFL = (BLT, PNM)\n" +
            "TXC = (NRT, LRG)\n" +
            "MVX = (LKL, XRR)\n" +
            "QSK = (JVM, MTF)\n" +
            "BGK = (LDB, NPX)\n" +
            "GJZ = (BFC, QQJ)\n" +
            "PXC = (LTB, PCH)\n" +
            "HMQ = (BGJ, QTC)\n" +
            "RXR = (BVJ, XSD)\n" +
            "BXM = (PRH, BCX)\n" +
            "FJH = (LRG, NRT)\n" +
            "GJH = (DGK, DDS)\n" +
            "BPT = (SBL, PHL)\n" +
            "RQL = (RQK, MRM)\n" +
            "SJB = (RQJ, LDQ)\n" +
            "NFN = (NJV, BRP)\n" +
            "MND = (NQQ, JHP)\n" +
            "NMQ = (KHV, RXR)\n" +
            "XGV = (TXK, HDS)\n" +
            "SPC = (KSS, XQF)\n" +
            "RMJ = (SMR, QRS)\n" +
            "CNX = (LFS, QVR)\n" +
            "KLR = (HJD, XSF)\n" +
            "XLP = (KRM, PNX)\n" +
            "LPM = (CMM, PHF)\n" +
            "FNR = (CCT, VTP)\n" +
            "NGQ = (CMT, JTX)\n" +
            "CCR = (BFM, TNV)\n" +
            "LCN = (FXV, TQL)\n" +
            "HVV = (HSX, KVX)\n" +
            "FSB = (MLX, SPL)\n" +
            "GGJ = (TLQ, VQD)\n" +
            "NHS = (DRG, FVK)\n" +
            "RQJ = (PBL, JKG)\n" +
            "VCC = (MMS, QHV)\n" +
            "HDX = (VVN, HXF)\n" +
            "VQM = (NRR, VVB)\n" +
            "TFN = (GFB, LRH)\n" +
            "QRS = (VQR, MDS)\n" +
            "HBM = (VTQ, SDN)\n" +
            "CCF = (SBS, XFD)\n" +
            "VCG = (HMQ, MCS)\n" +
            "NBF = (DVB, NHS)\n" +
            "DVB = (FVK, DRG)\n" +
            "PGB = (TDH, RFP)\n" +
            "XRF = (KFP, SPH)\n" +
            "KMM = (PDJ, GQN)\n" +
            "KTG = (GGQ, HNR)\n" +
            "BJH = (JBH, QSB)\n" +
            "JJH = (CCT, VTP)\n" +
            "LBH = (JFF, JFF)\n" +
            "GLG = (TMF, KCN)\n" +
            "TQR = (THM, GNR)\n" +
            "MQH = (GQN, PDJ)\n" +
            "MQR = (FMB, MRT)\n" +
            "FNH = (CTM, CMG)\n" +
            "SMR = (VQR, MDS)\n" +
            "GDS = (DNP, MJS)\n" +
            "LCT = (KQK, QFL)\n" +
            "VKB = (GBH, BGK)\n" +
            "VTQ = (CHM, MFP)\n" +
            "TNK = (QJT, KTP)\n" +
            "HNJ = (VVS, GCX)\n" +
            "JKT = (MMD, MGS)\n" +
            "PBP = (TPR, NMQ)\n" +
            "CPS = (KNJ, RFZ)\n" +
            "RNB = (KHX, FQC)\n" +
            "CMF = (LHN, RSQ)\n" +
            "HPK = (CCR, LXJ)\n" +
            "MFN = (NKQ, CGH)\n" +
            "HHB = (QBM, TFN)\n" +
            "DDJ = (QSK, KCC)\n" +
            "DFM = (RQL, VKX)\n" +
            "FKM = (GKQ, VJG)\n" +
            "HSJ = (LGQ, LXK)\n" +
            "HPT = (KXJ, LNK)\n" +
            "BNR = (JBX, DMK)\n" +
            "GJL = (CPC, JNF)\n" +
            "DFF = (KCQ, KCQ)\n" +
            "MCB = (GSS, JVP)\n" +
            "CPC = (JJH, FNR)\n" +
            "XLR = (MJK, DSM)\n" +
            "SBG = (JDG, XFL)\n" +
            "XSF = (NJQ, PBQ)\n" +
            "NGK = (RFM, FXR)\n" +
            "HSN = (GRH, HSJ)\n" +
            "LQM = (PQG, VKD)\n" +
            "VXN = (VMG, CGM)\n" +
            "PSK = (VGT, DTP)\n" +
            "JQH = (KLF, SCQ)\n" +
            "RJM = (SPC, TVP)\n" +
            "VSD = (TLL, TQR)\n" +
            "KCN = (GJH, NMS)\n" +
            "QHB = (GLM, BMP)\n" +
            "FMB = (VLK, XGT)\n" +
            "GBT = (DJJ, GSL)\n" +
            "LGH = (NGJ, LHJ)\n" +
            "SLR = (HDS, TXK)\n" +
            "VVQ = (GCX, VVS)\n" +
            "MDS = (RCX, KKP)\n" +
            "KVQ = (VPN, PJK)\n" +
            "CLF = (NHL, KGK)\n" +
            "XFK = (KQD, PNT)\n" +
            "CJD = (NML, RLM)\n" +
            "MCP = (TLM, QLS)\n" +
            "SPL = (PGH, VND)\n" +
            "GSS = (GPC, DNX)\n" +
            "RPH = (DBP, HHC)\n" +
            "HNR = (XXQ, JKD)\n" +
            "VBV = (VQT, MPJ)\n" +
            "PHF = (NQP, SBR)\n" +
            "BRP = (FJH, TXC)\n" +
            "AAA = (RMT, DHJ)\n" +
            "PBQ = (GHQ, NDB)\n" +
            "PXG = (VVG, SPN)\n" +
            "PNX = (JQV, JNG)\n" +
            "XHQ = (SJB, MBS)\n" +
            "VBL = (VLF, PXS)\n" +
            "VVG = (MTT, XTV)\n" +
            "PXS = (GLG, QFX)\n" +
            "MMQ = (FKM, HNH)\n" +
            "PHG = (HFN, NQT)\n" +
            "MFF = (KFL, LNQ)\n" +
            "PJM = (FHP, SPX)\n" +
            "SMJ = (KQD, KQD)\n" +
            "XGC = (CMM, PHF)\n" +
            "PDJ = (QCK, MHB)\n" +
            "SPN = (MTT, XTV)\n" +
            "BPK = (KFP, SPH)\n" +
            "MVF = (NQC, NKK)\n" +
            "LJB = (LBH, LBH)\n" +
            "GQN = (QCK, MHB)\n" +
            "NCG = (MTP, PXG)\n" +
            "GQL = (VGT, DTP)\n" +
            "NCX = (FNH, SHD)\n" +
            "HGZ = (QRS, SMR)\n" +
            "GMJ = (VSF, SFJ)\n" +
            "RFP = (XLP, RBD)\n" +
            "TXF = (GDC, HKP)\n" +
            "NBA = (SMR, QRS)\n" +
            "QTB = (FRL, NCX)\n" +
            "QLC = (GDN, QMD)\n" +
            "QHV = (SVV, HRM)\n" +
            "XTM = (GRV, THT)\n" +
            "VPN = (HHN, LTT)\n" +
            "RFZ = (XLR, QKM)\n" +
            "CMH = (SXG, CLF)\n" +
            "GFJ = (TCX, PHG)\n" +
            "VTT = (LGM, LFV)\n" +
            "RTC = (GKH, KPS)\n" +
            "XFJ = (VTQ, SDN)\n" +
            "GCX = (PGB, MJD)\n" +
            "MJK = (CLP, VML)\n" +
            "QQL = (RSG, KTG)\n" +
            "NSB = (XHQ, MGQ)\n" +
            "HCQ = (LGM, LFV)\n" +
            "GQX = (GJD, XKT)\n" +
            "RVR = (VVK, BKP)\n" +
            "JBG = (KKS, VBH)\n" +
            "JFF = (BTV, BTV)\n" +
            "BPM = (LNT, KPK)\n" +
            "LNQ = (JJR, HGQ)\n" +
            "FKK = (GLH, GPQ)\n" +
            "SBL = (CDK, BGL)\n" +
            "LNT = (BNH, RNS)\n" +
            "JRH = (JPS, HFG)\n" +
            "VVS = (MJD, PGB)\n" +
            "DPP = (LFR, GFQ)\n" +
            "MNF = (PBP, VDN)\n" +
            "QKM = (DSM, MJK)\n" +
            "JPJ = (CXN, RTJ)\n" +
            "QGC = (RQP, LBX)\n" +
            "CVB = (MND, RCV)\n" +
            "RFC = (CHG, FFQ)\n" +
            "KPS = (BCF, VSD)\n" +
            "XML = (MNV, TXG)\n" +
            "JVH = (JDP, GGF)\n" +
            "CRC = (XTM, LLQ)\n" +
            "VJG = (JRH, LLT)\n" +
            "SPB = (JPT, NDM)\n" +
            "JGV = (XKX, DNF)\n" +
            "GGQ = (XXQ, JKD)\n" +
            "XLK = (PGQ, VKB)\n" +
            "JBX = (NNX, VRP)\n" +
            "RSG = (HNR, GGQ)\n" +
            "GVC = (LCT, XNM)\n" +
            "XDP = (XML, HND)\n" +
            "CXC = (SMQ, NGK)\n" +
            "PXV = (TNK, BPG)\n" +
            "NDM = (XCR, GQX)\n" +
            "CPM = (BJH, QXK)\n" +
            "KGK = (LKX, SPS)\n" +
            "BLT = (NRL, PQR)\n" +
            "BHN = (GLH, GPQ)\n" +
            "BLS = (TKL, MNF)\n" +
            "PHL = (CDK, BGL)\n" +
            "BCX = (DFF, DBX)\n" +
            "HNH = (GKQ, VJG)\n" +
            "VKD = (NCM, TCF)\n" +
            "DSM = (VML, CLP)\n" +
            "DNN = (SLT, KJD)\n" +
            "SBR = (SKT, JCC)\n" +
            "TNL = (BGR, CJD)\n" +
            "DFT = (XFL, JDG)\n" +
            "MPT = (RKT, MFF)\n" +
            "TVQ = (XDP, QBP)\n" +
            "LLT = (JPS, HFG)\n" +
            "DXQ = (XTM, LLQ)\n" +
            "SFM = (PHG, TCX)\n" +
            "BNJ = (MND, RCV)\n" +
            "PBS = (NHQ, QRB)\n" +
            "JXM = (HRF, PKB)\n" +
            "VTP = (HPT, GTX)\n" +
            "SVV = (XXJ, RHB)\n" +
            "MHA = (QQJ, BFC)\n" +
            "MBV = (HMQ, MCS)\n" +
            "VJJ = (BLT, PNM)\n" +
            "QJT = (RVR, CGR)\n" +
            "VVN = (LXS, KTC)\n" +
            "QKS = (TRC, DFM)\n" +
            "MGQ = (MBS, SJB)\n" +
            "NDL = (BPT, KRN)\n" +
            "JPQ = (SVF, HDT)\n" +
            "VDH = (JHR, GCQ)\n" +
            "KCQ = (KNJ, KNJ)\n" +
            "XJJ = (DFT, SBG)\n" +
            "JQV = (MPV, KLR)\n" +
            "VQD = (DXQ, CRC)\n" +
            "JDG = (TJK, QMH)\n" +
            "SPX = (XCF, PPD)\n" +
            "LXJ = (TNV, BFM)\n" +
            "LBL = (NGQ, JHN)\n" +
            "QBN = (QQL, JPP)\n" +
            "LFS = (CVB, BNJ)\n" +
            "LBS = (JFV, NKC)\n" +
            "TLL = (THM, GNR)\n";

    public static void main(String[] args) {
        String ss[] = sq.split("\n");
        String instruction = ss[0];
        Map<String, String> map = new HashMap<>();

        for (int i = 1; i < ss.length; i++) {
            String sq = ss[i].replace("(", "").replace(")", "");
            sq = sq.replace(" ","");
            map.put(sq.split("=")[0].trim(), sq.split("=")[1].trim());
        }
        System.out.println("here");
        String point = "AAA";
        int k = 0;
        int instructionLen = instruction.length();
        while (!point.equals("ZZZ")) {
            System.out.println(point);
            char dir = instruction.charAt(k % instructionLen);
            k++;
            String dest = map.get(point);
            if (dir == 'R') {
                point = dest.split(",")[1];
            } else {
                point = dest.split(",")[0];
            }
        }
        System.out.println(k);
    }


}
