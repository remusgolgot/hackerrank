package adventofcode.aoc2023.day11;


import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;

public class Main2 {

    static String s =
            "...#......\n" +
                    ".......#..\n" +
                    "#.........\n" +
                    "..........\n" +
                    "......#...\n" +
                    ".#........\n" +
                    ".........#\n" +
                    "..........\n" +
                    ".......#..\n" +
                    "#...#.....";


    static String sq = ".......#..........................................................................#.........................................................\n" +
            "....................#.........#............#.........................#.......................#..............................................\n" +
            ".#.......................................................#.................#.........................................................#......\n" +
            "..............#.................................#................#....................................................#.....................\n" +
            "..................................#......................................................................#..................................\n" +
            "..................#..................................#.............................#.......#...............................#................\n" +
            ".......#...............................#...................#................................................................................\n" +
            "........................................................................#....................................#........................#.....\n" +
            "..#...........................................................................................................................#.............\n" +
            "............#............#..............................................................................#...................................\n" +
            "...........................................#.....................................................#................#.........................\n" +
            ".....................................................................#...........................................................#..........\n" +
            "...............#....................#.......................................................................................................\n" +
            "#.....................................................#.......................................#............................#..........#.....\n" +
            ".....#................#......#................................................#.............................................................\n" +
            ".......................................#.......................#.......#..............#..................#......#...........................\n" +
            "............................................................................................................................................\n" +
            "...................................................#..............................................#.............................#........#..\n" +
            "..........#........................................................................................................#........................\n" +
            "...............................................#.............................#............#...........#.....................................\n" +
            "....................#..........................................................................................#........#...................\n" +
            "....#.........#............#...............................................................................................................#\n" +
            "....................................#................................#.............#............#...........................................\n" +
            "...............................#..................................................................................#.........................\n" +
            "#...............................................#........#.....................................................................#............\n" +
            "......#........................................................#......................................................#.....................\n" +
            "..........................................#....................................#............................................................\n" +
            "..................#.....................................................................#..................................#.......#........\n" +
            ".............................................................................................#..............................................\n" +
            ".............#........#...........#..........................#............................................#.......#.........................\n" +
            "........#...................#.......................#...................#..................................................................#\n" +
            ".................................................................................#.......................................#..................\n" +
            "................................................................#...........................................................................\n" +
            "...............................................#...........#..........................................#.....#...............................\n" +
            "..........................................#....................................................................................#............\n" +
            ".......#.....#............................................................................#.............................................#...\n" +
            "......................#....................................................#....................................#...........................\n" +
            ".................#...................#................#....................................................................#................\n" +
            "..#...............................................................#...................#.............................#.......................\n" +
            ".............................................................................................#..............................................\n" +
            ".........#..........#.......................................................................................................................\n" +
            "...............................#.........#.......#...............................#.........................................................#\n" +
            "......................................................................................................#...................#.....#...........\n" +
            "........................................................................................#..................#................................\n" +
            "..#.........................................................................................................................................\n" +
            "....................................................................................................................#...................#...\n" +
            "......................#..............................#..........#...........................................................................\n" +
            "......................................................................#..........................................................#..........\n" +
            "#.......................................#......................................................................#............................\n" +
            ".....#..........................#...........................................................................................................\n" +
            "..................#...............................#............................#........................#.................#.................\n" +
            "..........................................................#.................................#...............................................\n" +
            ".......................#..............................................................................................#...........#.....#...\n" +
            "............................................................................................................................................\n" +
            ".......#............................................#.......................................................................................\n" +
            "...............#................#......#......................#......................................#......................................\n" +
            ".....................................................................................#......................................................\n" +
            "............................................................................................................................................\n" +
            "............................................................................................................................................\n" +
            "...#........................................................#...........................#.....#.........................#.........#.........\n" +
            "............................................................................................................................................\n" +
            "...........#..........#......#................................................................................#.............#...............\n" +
            ".......................................#.................................................................................................#..\n" +
            "...............................................#...............#............................................................................\n" +
            ".............................................................................#.....................................#........................\n" +
            "....#..............#..................................................#............#........................................................\n" +
            "..............................#......................#..........................................#.....................................#.....\n" +
            "..............#..........................#...........................................................#......................................\n" +
            "................................................#..............................#..............................#..........#.......#..........\n" +
            "............................................................#...............................................................................\n" +
            ".#........................#.................................................................................................................\n" +
            "...............................#...........................................................#................................................\n" +
            ".............#........................................#........#..................................................#.........................\n" +
            "...........................................#...........................................................#...................#................\n" +
            ".........#.......................................#............................#.......#...................................................#.\n" +
            ".....................................................................#.............................................................#........\n" +
            "...........................................................#................................................................................\n" +
            ".....................................................#......................................#.......#..............#...........#............\n" +
            "............................................................................................................................................\n" +
            "#..........#.....................#..............................................................#........................#..................\n" +
            "...........................#...................#...............................#.....#..................................................#...\n" +
            "................................................................#...........................................................................\n" +
            ".......................................#..................#.......................................................................#.........\n" +
            "...........................................................................................................#................................\n" +
            "......#...............................................#......................#.................#.......................#....................\n" +
            "...............................#..................................#.............................................#....................#......\n" +
            "...........#......................................................................#................#............................#...........\n" +
            ".........................#.........#...............#........................................................................................\n" +
            ".#.........................................#...........................#..................................................................#.\n" +
            "....................#.........................................#.............#...........................................#...................\n" +
            "............................#...................................................................#............................#..............\n" +
            "............................................................................................................................................\n" +
            ".............#..............................................................................#...............#.........................#.....\n" +
            "#......#..........................#...............................................................................#.........................\n" +
            "...............................................#.......................#..................................................................#.\n" +
            ".....................#......................................................................................................................\n" +
            "............................................................#......................#.........................................#......#.......\n" +
            ".........................#............................#................................................................#....................\n" +
            "..#..............................#...............................#..........................................................................\n" +
            ".......................................................................................#.............#..........#...........................\n" +
            ".............#.........................#....................................................................................................\n" +
            "..................................................#...............................#.........................................#...............\n" +
            "...................#..........................................................................#.............................................\n" +
            ".#....................................................#.......#..........................................#......................#.....#.....\n" +
            "...............................#............................................................................................................\n" +
            "..............#....................................................#..........#....................#......................................#.\n" +
            ".........................................................#..............................#..........................#........................\n" +
            ".....#.........................................................................................#.............#..........#...................\n" +
            "..................................#................................................................................................#........\n" +
            "#........................#..................................................................................................................\n" +
            "....................#.......................#................................#..............................................................\n" +
            "...........#.......................................................................#...................#......................#.............\n" +
            "..............................................................#...................................................#.........................\n" +
            "...............................#..................#............................................#............................................\n" +
            "................#.........#.............#............................#....................#................#................................\n" +
            ".#..........................................................................................................................................\n" +
            "........#...................................................................................................................................\n" +
            "..................................#...................................................#.............................................#.......\n" +
            ".................................................................................#..........................................................\n" +
            ".............................#..........................#.....................................#....................#.......................#\n" +
            "........................................#..........................#........................................#...........#.....#.............\n" +
            "......................................................................................................#.....................................\n" +
            "..........#......#.......#....................................................#......................................................#......\n" +
            ".....#...............................................#.................................#........#...........................................\n" +
            "#...........................................#...................................................................................#...........\n" +
            "..............................#..............................#.....................#.......#................................................\n" +
            "......................#.........................#.........................................................................................#.\n" +
            ".......#...........................#.......................................#...............................#............#...................\n" +
            "............#.............................................#........................................#........................................\n" +
            ".....................................................#..............#................#......................................................\n" +
            "............................................................................................................................................\n" +
            ".........................#.................................................................#............#.....................#.............\n" +
            "..................#..........................................................#..................................#......#..................#.\n" +
            ".#.................................................#..........#.........#.........#.........................................................\n" +
            ".......#.........................#.......#..............#..........................................#........................................\n" +
            ".....................#.....#..............................................................................#.................................\n" +
            "...........................................................................#.....................................................#..........\n" +
            "......................................#.........................................................#........................................#..\n" +
            "#...............#...................................#.....................................#............#.................#..................\n" +
            ".............................................#.........................#..........#.............................#...........................\n";


    public static void main(String[] args) {
        String[] ss = sq.split("\n");
        boolean b = true;
        List<Integer> rowsNoGalaxies = new ArrayList<>();
        List<Integer> colsNoGalaxies = new ArrayList<>();
        List<Pair> galaxies = new ArrayList<>();

        for (int i = 0; i < ss.length; i++) {
            b = true;
            for (int j = 0; j < ss[0].length(); j++) {
                if (ss[i].charAt(j) == '#') {
                    b = false;
                }
            }
            if (b) {
                rowsNoGalaxies.add(i);
            }
        }
        for (int i = 0; i < ss[0].length(); i++) {
            b = true;
            for (int j = 0; j < ss.length; j++) {
                if (ss[j].charAt(i) == '#') {
                    b = false;
                }
            }
            if (b) {
                colsNoGalaxies.add(i);
            }
        }

        int[][] mat = new int[ss.length + rowsNoGalaxies.size()][ss.length + colsNoGalaxies.size()];

        int k = 0;
        for (int i = 0; i < ss.length; i++) {
            if (!rowsNoGalaxies.contains(i)) {
                for (int j = 0; j < ss[0].length(); j++) {
                    if (ss[i].charAt(j) == '.') {
                        mat[i + k][j] = 1;
                    } else {
                        mat[i + k][j] = 2;
                        galaxies.add(new Pair(i, j));
                    }
                }
            } else {
                for (int j = 0; j < ss[0].length(); j++) {
                    mat[i + k][j] = 1;
                }
                k++;
                for (int j = 0; j < ss[0].length(); j++) {
                    mat[i + k][j] = 1;
                }
            }
        }
        BigDecimal sum = new BigDecimal(0);
        int EXPANSION = 999999;
        for (int i = 0; i < galaxies.size() - 1; i++) {
            for (int j = i + 1; j < galaxies.size(); j++) {
                int q = 0;
                int distX = Math.abs(galaxies.get(j).x - galaxies.get(i).x);
                int distY = Math.abs(galaxies.get(j).y - galaxies.get(i).y);

                for (int l = galaxies.get(i).x; l < galaxies.get(j).x; l++) {
                    if (rowsNoGalaxies.contains(l)) {
                        q++;
                    }
                }
                for (int l = galaxies.get(j).x; l < galaxies.get(i).x; l++) {
                    if (rowsNoGalaxies.contains(l)) {
                        q++;
                    }
                }
                for (int l = galaxies.get(i).y; l < galaxies.get(j).y; l++) {
                    if (colsNoGalaxies.contains(l)) {
                        q++;
                    }
                }
                for (int l = galaxies.get(j).y; l < galaxies.get(i).y; l++) {
                    if (colsNoGalaxies.contains(l)) {
                        q++;
                    }
                }

                System.out.println(i + " " + j + " " + (distX + distY + EXPANSION * q));
                sum = sum.add(new BigDecimal(distX)).add(new BigDecimal(distY)).add(new BigDecimal(EXPANSION * q));
            }
        }
        System.out.println(sum);

        // 702152204842

    }

    static class Pair {
        int x;
        int y;

        public Pair(int x, int y) {
            this.x = x;
            this.y = y;
        }
    }

}
