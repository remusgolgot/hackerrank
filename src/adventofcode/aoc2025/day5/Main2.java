package adventofcode.aoc2025.day5;

import common.Pair;

import java.util.ArrayList;
import java.util.List;

/**
 * https://adventofcode.com/2025/day/5
 */
public class Main2 {

    public static void main(String[] args) {

        String t = "3-5\n" +
                "6-40\n" +
                "16-20\n" +
                "12-18\n" +
                "---" +
                "1\n" +
                "5\n" +
                "8\n" +
                "11\n" +
                "17\n" +
                "32";

        String s = "10610054450932-16248915699091\n" +
                "377085883505177-377411515098475\n" +
                "375819323667708-376258116861038\n" +
                "170187498282307-170497327253346\n" +
                "166652278386204-167578065989335\n" +
                "553257284780264-558329119300938\n" +
                "42434578175138-42434578175138\n" +
                "141648435367857-144914998434168\n" +
                "23885840349310-27544329546633\n" +
                "478425798600672-480092356371002\n" +
                "503187432771806-503744652602074\n" +
                "242497191325949-247717040263977\n" +
                "373320430983949-374119463563198\n" +
                "161997126715579-162416318511877\n" +
                "253214080417137-255656168515865\n" +
                "486391866378394-488097411654907\n" +
                "86701386796024-87682738381597\n" +
                "105089710343182-108170485649545\n" +
                "313807522958730-321036568524856\n" +
                "72771293387577-74608184150004\n" +
                "415837882507207-415837882507207\n" +
                "275181436548493-277947483176888\n" +
                "444094685580950-450264786873117\n" +
                "403875389659648-405648612057666\n" +
                "37510747372890-37795211831895\n" +
                "224564177147340-230267414203533\n" +
                "170187498282307-170497327253346\n" +
                "463473120266464-468283094457453\n" +
                "116206507913732-117801851721678\n" +
                "377770021010426-378034268280814\n" +
                "263648745770307-268043024098498\n" +
                "168161437500148-168422850957874\n" +
                "362564871337196-369984092206838\n" +
                "42434578175138-48996960945783\n" +
                "16248915699092-18853565551073\n" +
                "536860740011342-540550222656573\n" +
                "407489351926926-409136596727249\n" +
                "64843827189947-68194020297224\n" +
                "138170129140434-138170129140434\n" +
                "379793624112050-380199462038207\n" +
                "477129275514807-478992362634990\n" +
                "283049324534848-288324541570488\n" +
                "402328697595602-404368405179883\n" +
                "480641052790123-482172109386328\n" +
                "92351643659055-96246980779921\n" +
                "2004292901156-7914212503910\n" +
                "72771293387577-77951102420232\n" +
                "333579866098037-337713952280567\n" +
                "435126109763559-441248634458376\n" +
                "161751018223278-162416318511877\n" +
                "456795284641853-460591761056785\n" +
                "38610745923671-38861291364299\n" +
                "358343414221085-358343414221085\n" +
                "444094685580949-444094685580949\n" +
                "118158125349266-119342148057794\n" +
                "33123369283774-33534431858294\n" +
                "119052990541245-120280969734972\n" +
                "35656386438453-35774251725366\n" +
                "166556969313016-167219895587143\n" +
                "379434785857707-380199462038207\n" +
                "504347735650773-504718853689927\n" +
                "503187432771806-504047945087635\n" +
                "404993844400723-407064567330556\n" +
                "376812091526666-377411515098475\n" +
                "409739168331678-411638071344458\n" +
                "294270245917949-300241350744030\n" +
                "111721191685421-113008858109332\n" +
                "166556969313016-167219895587143\n" +
                "479387003643678-481197478542901\n" +
                "472848531251287-474432506561118\n" +
                "543808234719731-551879599099016\n" +
                "144914998434170-149365499791803\n" +
                "201619068465433-210432685194375\n" +
                "325509633685329-330357309860867\n" +
                "115531735816576-116588933665838\n" +
                "117107791173109-118733264642278\n" +
                "510712334036647-511088667143489\n" +
                "509847091213598-510470418637247\n" +
                "510363725616745-510470418637247\n" +
                "37510747372890-37795211831895\n" +
                "526842281664852-526842281664852\n" +
                "385960260830840-385960260830840\n" +
                "344251920979258-348111299303952\n" +
                "170187498282307-170497327253346\n" +
                "514888881586172-522047578487168\n" +
                "376534315262621-377411515098475\n" +
                "254830234303106-257685371996874\n" +
                "184687160999021-188544578144220\n" +
                "258340103822037-260744821848415\n" +
                "152917023062298-157447011231423\n" +
                "385960260830841-390050562321800\n" +
                "38861291364299-39405453096420\n" +
                "3281982973714-7037830700031\n" +
                "406114160353047-408180688735027\n" +
                "57829276278111-57829276278111\n" +
                "507014677466817-507577609524868\n" +
                "374542723441533-375112091822392\n" +
                "114357475846755-115766105072307\n" +
                "198734021978702-198734021978702\n" +
                "553257284780264-561597801015087\n" +
                "473700821070104-475523936767185\n" +
                "113435483159301-115087665051445\n" +
                "242497191325948-242497191325948\n" +
                "294270245917949-297269283127016\n" +
                "377085883505177-377586593672600\n" +
                "372005305858976-372810318417304\n" +
                "303059139415042-310645049407598\n" +
                "381401091136808-381619156273806\n" +
                "80930708960388-86701386796022\n" +
                "102525525356951-108170485649545\n" +
                "232890287812183-240518862283316\n" +
                "166979233746096-167578065989335\n" +
                "511833093206908-512140028578734\n" +
                "35324849616798-36032996048334\n" +
                "494450066510701-498192385693091\n" +
                "502772958852307-503187432771806\n" +
                "121416909236809-121416909236809\n" +
                "367016147740203-369984092206838\n" +
                "251561510682286-254452565070247\n" +
                "174397964087958-178805340569891\n" +
                "474866735023015-476470892846170\n" +
                "373320430983949-374119463563198\n" +
                "468283094457455-469703701325998\n" +
                "277947483176888-277947483176888\n" +
                "526842281664852-531017740433478\n" +
                "522047578487169-522047578487169\n" +
                "348111299303953-350165895897005\n" +
                "168741988942276-169414479775270\n" +
                "34857496454022-35024318680330\n" +
                "31266520206196-31812829315448\n" +
                "423748750132437-428944289918982\n" +
                "415837882507207-417892382404910\n" +
                "378315776087448-378659833221085\n" +
                "164401353213623-164814691375711\n" +
                "453150798871390-456795284641852\n" +
                "502772958852307-503187432771806\n" +
                "484533916970816-490492200091905\n" +
                "171700926013341-176940722190152\n" +
                "182270423081289-184687160999020\n" +
                "110951711885739-112328323306381\n" +
                "112629404011737-114061462125024\n" +
                "508743403972058-509577728047001\n" +
                "232890287812183-235537781392470\n" +
                "506337433624558-507014677466817\n" +
                "92351643659055-96246980779921\n" +
                "152917023062298-157447011231423\n" +
                "378315776087448-378796654651197\n" +
                "428944289918982-428944289918982\n" +
                "61255685842787-67499416855305\n" +
                "310645049407599-310645049407599\n" +
                "121416909236810-129113196898384\n" +
                "379793624112050-380575951935486\n" +
                "30806523226535-31556303419488\n" +
                "168422850957874-169310984644171\n" +
                "432974718241783-438409855659257\n" +
                "214077354693455-218300354525355\n" +
                "163526538425549-163773971995297\n" +
                "134144754210334-138170129140434\n" +
                "396483746129268-398435409850698\n" +
                "548358695675736-551879599099016\n" +
                "161171210718783-161751018223278\n" +
                "322019116060409-328534245922140\n" +
                "352886806461360-358343414221085\n" +
                "494450066510701-498192385693091\n" +
                "509292857159618-509847091213598\n" +
                "257023524720362-259558087599216\n" +
                "475905964034857-477582385320626\n" +
                "509062241545301-509847091213598\n" +
                "205533915657020-206925443208141\n" +
                "337713952280569-339641433201680\n" +
                "224564177147340-224564177147340\n" +
                "377770021010426-378315776087448\n" +
                "408885050468615-410539495761479\n" +
                "313807522958730-321036568524856\n" +
                "192526997137579-198734021978701\n" +
                "506488079409043-506850981640846\n" +
                "37023231028737-37251313412913\n" +
                "380339314737531-380575951935486\n" +
                "215632063697273-218300354525355\n" +
                "392837526773318-401598334871278\n" +
                "52347457634747-57829276278110\n" +
                "---";

        String[] ss = s.split("---");
        String[] ing = ss[0].split("\n");

        List<Pair<Long, Long>> ings = new ArrayList<>();

        for (int i = 0; i < ing.length; i++) {
            long start = Long.parseLong(ing[i].split("-")[0]);
            long end = Long.parseLong(ing[i].split("-")[1]);
            ings.add(new Pair<>(start, end));
        }

        int merges;

        while (true) {
            merges = 0;
            for (int i = 0; i < ings.size(); i++) {
                System.out.println(ings.get(i).getFirst() + " " + ings.get(i).getSecond());
            }

            for (int i = 0; i < ings.size() - 1; i++) {
                for (int j = i + 1; j < ings.size(); j++) {
                    long start = ings.get(i).getFirst();
                    long end = ings.get(i).getSecond();
                    Pair p = ings.get(j);
                    Pair r = ings.get(i);
                    if (start <= (Long) p.getFirst() && end >= (Long) p.getSecond()) {  //
                        ings.add(new Pair(start, end));
                        ings.remove(p);
                        ings.remove(r);
                        merges++;
                        break;
                    }
                    if (start >= (Long) p.getFirst() && end <= (Long) p.getSecond()) {  //
                        ings.remove(r);
                        merges++;
                        break;
                    }
                    if ((Long) p.getFirst() >= start && end <= (Long) p.getSecond() && end >= (Long) p.getFirst()) {
                        ings.add(new Pair(start, p.getSecond()));
                        ings.remove(p);
                        ings.remove(r);
                        merges++;
                        break;
                    }
                    if ((Long) p.getFirst() <= start && end >= (Long) p.getSecond() && (Long) p.getSecond() >= start) {
                        ings.add(new Pair(p.getFirst(), end));
                        ings.remove(p);
                        ings.remove(r);
                        merges++;
                        break;
                    }
                }
                if (merges > 0) {
                    break;
                }
            }
            if (merges == 0) {
                break;
            }
        }
        long sol = 0;
        for (int i = 0; i < ings.size(); i++) {
            sol += ings.get(i).getSecond() - ings.get(i).getFirst() + 1;
            System.out.println(ings.get(i).getSecond() - ings.get(i).getFirst() + 1);
        }
        System.out.println("result=" + sol);

    }
    //345755049374932
}
