package adventofcode.aoc2025.day7;

import java.util.HashSet;
import java.util.Set;

/**
 * https://adventofcode.com/2025/day/7
 */
public class Main {

    public static void main(String[] args) {

        String t =
                ".......S.......\n" +
                "...............\n" +
                ".......^.......\n" +
                "...............\n" +
                "......^.^......\n" +
                "...............\n" +
                ".....^.^.^.....\n" +
                "...............\n" +
                "....^.^...^....\n" +
                "...............\n" +
                "...^.^...^.^...\n" +
                "...............\n" +
                "..^...^.....^..\n" +
                "...............\n" +
                ".^.^.^.^.^...^.\n" +
                "...............";

        String s = "......................................................................S......................................................................\n" +
                ".............................................................................................................................................\n" +
                "......................................................................^......................................................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................................................^.^.....................................................................\n" +
                ".............................................................................................................................................\n" +
                "....................................................................^...^....................................................................\n" +
                ".............................................................................................................................................\n" +
                "...................................................................^.^.^.^...................................................................\n" +
                ".............................................................................................................................................\n" +
                "..................................................................^.^.^.^.^..................................................................\n" +
                ".............................................................................................................................................\n" +
                ".................................................................^.^.^.^.^.^.................................................................\n" +
                ".............................................................................................................................................\n" +
                "................................................................^.^.^.....^.^................................................................\n" +
                ".............................................................................................................................................\n" +
                "...............................................................^.^.^.^...^.^.^...............................................................\n" +
                ".............................................................................................................................................\n" +
                "..............................................................^.^.^...^...^.^.^..............................................................\n" +
                ".............................................................................................................................................\n" +
                ".............................................................^...^.....^...^.^.^.............................................................\n" +
                ".............................................................................................................................................\n" +
                "............................................................^.^.....^.^...^.^.^.^............................................................\n" +
                ".............................................................................................................................................\n" +
                "...........................................................^.^...^...^.^.^.^.^.^.^...........................................................\n" +
                ".............................................................................................................................................\n" +
                "..........................................................^.^...^.^.^.^.^.^.^.^.^.^..........................................................\n" +
                ".............................................................................................................................................\n" +
                ".........................................................^.^.^.^.....^.^.^.^.....^.^.........................................................\n" +
                ".............................................................................................................................................\n" +
                "........................................................^.^.^.^.....^.^.^.^.^.....^.^........................................................\n" +
                ".............................................................................................................................................\n" +
                ".......................................................^.^.^.^.^.^.^.^.^...^.....^...^.......................................................\n" +
                ".............................................................................................................................................\n" +
                "......................................................^.^...^...^.....^...^...^.^.....^......................................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................................^.^.^...^.^.....^.^.^.^...^.^.^.^.^.....................................................\n" +
                ".............................................................................................................................................\n" +
                "....................................................^.^.^.^...^.^.^.^.............^.^.^.^....................................................\n" +
                ".............................................................................................................................................\n" +
                "...................................................^.^.^.^.^.^...^.^.^.^.....^.^.^.^.^.^.^...................................................\n" +
                ".............................................................................................................................................\n" +
                "..................................................^...^...^.....^.......^.^.^...^...^.^.^.^..................................................\n" +
                ".............................................................................................................................................\n" +
                ".................................................^...^...^.^.^.^.^...^...........^.^.^.....^.................................................\n" +
                ".............................................................................................................................................\n" +
                "................................................^.^.^.^.^.^.^.^...^...^...^...^.^.^.....^.^.^................................................\n" +
                ".............................................................................................................................................\n" +
                "...............................................^.^...^.^...^.^.^...^...^.^.....^.^.^.^.^.....^...............................................\n" +
                ".............................................................................................................................................\n" +
                "..............................................^.^.^.^.^.^...^...^...^.^.^.^...^.^.^.^.......^.^..............................................\n" +
                ".............................................................................................................................................\n" +
                ".............................................^.^.^.^...^.^.^.^...^.^...^...^...^...^.....^.^.^.^.............................................\n" +
                ".............................................................................................................................................\n" +
                "............................................^.^...^...^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^.^.^............................................\n" +
                ".............................................................................................................................................\n" +
                "...........................................^.^...^.^.^.^.^.^...^...^...^...^...^.^...^.^.^.^...^.^...........................................\n" +
                ".............................................................................................................................................\n" +
                "..........................................^.^.^...^.^.^.^...^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^..........................................\n" +
                ".............................................................................................................................................\n" +
                ".........................................^.^.......^...^.....^...^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.........................................\n" +
                ".............................................................................................................................................\n" +
                "........................................^.^...^.^...^...^.^.^.^.^.....^.....^.^.^.^.^.....^...^.^...^........................................\n" +
                ".............................................................................................................................................\n" +
                ".......................................^.^.^.^.^.^.^.^.^.^.^...^...^.^...^.^...^...^.^.......^.....^.^.......................................\n" +
                ".............................................................................................................................................\n" +
                "......................................^...^.^.^.^.....^...^.........^.^...^.^.^...^.^...^.^.^.^.^.^...^......................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................^.^...^.^.^.^.......^.^.....^.^.^.^.^.^.^...^.^.....^.....^.^...^.^.....................................\n" +
                ".............................................................................................................................................\n" +
                "....................................^...^...^.....^...^.^.^...^.^.^.^.^.^.^.......^.....^.^.^.^...^...^.^....................................\n" +
                ".............................................................................................................................................\n" +
                "...................................^.^.^.^...^...^.^...^.^.^...^.....^.^...^.^...^.^.^...^...^.^.^.^.^...^...................................\n" +
                ".............................................................................................................................................\n" +
                "..................................^.^.^.^.^...^.^.^.^.^.^.^.^...^...^...^.^.....^.^.^...^.^...^.^.....^.^.^..................................\n" +
                ".............................................................................................................................................\n" +
                ".................................^...^.........^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.......^.^.^.....^.^.^.^.................................\n" +
                ".............................................................................................................................................\n" +
                "................................^.^.^...^...^...^.^.^.^...^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^................................\n" +
                ".............................................................................................................................................\n" +
                "...............................^.^...^.^.^.^.^.^...^.^.^...^...^...^.^.^.....^...^...^.^.....^.^...^.^.....^.^...............................\n" +
                ".............................................................................................................................................\n" +
                "..............................^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.^...^...^.....^.....^.....^..............................\n" +
                ".............................................................................................................................................\n" +
                ".............................^.^.^.^.^.^.^...^.^.^.^.^.....^.^.^.....^.^.^.^.....^...^...^.^.^...^.^.^.^.....^.^.............................\n" +
                ".............................................................................................................................................\n" +
                "............................^.^...^.^.^.^.^.^.^.^...^...^.^.^.^.^.....^.^.^.^.^...^.^.^.^...^.^.^...^...^.^.^...^............................\n" +
                ".............................................................................................................................................\n" +
                "...........................^...^...^.^...^.^.^...^.^...^.......^...^...^.^...^.^.^...^.^...^.^...^.^...^.^...^.^.^...........................\n" +
                ".............................................................................................................................................\n" +
                "..........................^.^...^.^...^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...^.^.........^...^.^...^.....^...^.^...^.^..........................\n" +
                ".............................................................................................................................................\n" +
                ".........................^.^.^.^.^...^.^.^.....^.^.......^.^.^...^...^.^...^.......^.^.^...^.^.^.....^.^.^.^.^.^...^.........................\n" +
                ".............................................................................................................................................\n" +
                "........................^.^.....^...^.^.^...^.^...^...^.^.^.^.^...^.^.^...^.^.^.^...^.^.....^.^.^.^.^.^...^.....^.^.^........................\n" +
                ".............................................................................................................................................\n" +
                ".......................^.^...^.^...^.^.^.^.....^...^...^...^.....^.^...^.^...^...^.^.^.^.^.^...^.......^.^.^.^.^...^.^.......................\n" +
                ".............................................................................................................................................\n" +
                "......................^.^.^.....^...^...^.^.^.^.....^.^...^.^.^.^.^...^...^.......^.^.^.^.........^.....^.^.^...^.^...^......................\n" +
                ".............................................................................................................................................\n" +
                ".....................^.^.^.....^...^.....^.^...^...^.....^.....^.^.^.^...^.^...^.^.^...^.^.^.^.^.^.^...^...^.^.^.^.....^.....................\n" +
                ".............................................................................................................................................\n" +
                "....................^.^.......^.^.^.....^...^...^...^.^.^.^.^...^.^...^.....^.^.^.^.^.....^...^.^...^.^.....^.^...^.^.^.^....................\n" +
                ".............................................................................................................................................\n" +
                "...................^...^.^.^.^.^.^.....^...^.^.^.^.^.....^...^...^.^.^.^...^.........^.^.....^...^...^.^.^.......^.^.^.^.^...................\n" +
                ".............................................................................................................................................\n" +
                "..................^.^.^.^.......^.^.^.^.^...^.^...^...^.^.......^.^.^.^.^.^...^.^.^.^.^...^.^.^...^.^.^...^.^...^.^.....^.^..................\n" +
                ".............................................................................................................................................\n" +
                ".................^.^...^.^.^.^.^...^.^.^.......^.^.^...^.^.^...^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.................\n" +
                ".............................................................................................................................................\n" +
                "................^...^.^.^...^.^.....^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.......^...^.^.^.^.^...^...^.^.^...^...^...^.^.......^................\n" +
                ".............................................................................................................................................\n" +
                "...............^.^.^...^.^.^.^.^.......^.^.^.^.^.^.^...^.^.^.^.^.^.^.......^.......^.....^.^.^...^...^...^...^.^.^.^.^.^.^.^.^...............\n" +
                ".............................................................................................................................................\n" +
                "..............^...^.^.^...^.^.^.^.......^.....^.^...^.^.^.^.^.^.^.^...^.................^.^.^.^...^.^.^.^.......^.^.^...^...^.^..............\n" +
                ".............................................................................................................................................\n" +
                ".............^.^.^.^.........^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^...^.^...^.^.^.^...^.^.^.^.............\n" +
                ".............................................................................................................................................\n" +
                "............^.^.^.^...^.^...^.^...^.^...^.^.^.^...^.......^.^...^...^.^...^.^...^...^.^.^.^...^.......^.^...^...^.......^.^.^.^.^............\n" +
                ".............................................................................................................................................\n" +
                "...........^...^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.....^...^.....^.^.^.^.^.^.^.^.....^.....^.^.^.^.^.^.^.^.^...^...^.^.....^.^.^.^...........\n" +
                ".............................................................................................................................................\n" +
                "..........^.^...^.^.....^...^.^.^.^...^.^.^.^.^.^...^.^...^.^.......^.....^.........^.^.^.......^...^.^.^.......^...^.^...^.^.^.^.^..........\n" +
                ".............................................................................................................................................\n" +
                ".........^.^.^.^.^...^...^.^.......^.^.^.^.^.^...^.^.^.^.^.^.^...^...^...^.^.^.^.....^.^.^.^...^.^.^...^.^.^.^.^.^...^.^.^.....^...^.........\n" +
                ".............................................................................................................................................\n" +
                "........^.^.........^.^.^...^.^.....^.....^.^.^.^.^.^.....^...^.^.^.^.......^...^...^.^.^.....^...^.^.^.^.^.....^.^.^.^.^.^...^...^.^........\n" +
                ".............................................................................................................................................\n" +
                ".......^.^.^.^.^.^.^...^.^...^.^.^.^...^...^...^...^.^...^.^.^.^...^.^...^.....^.^.^...^...^.^.....^.^.^.^.^.....^.....^.^...^.^.^...^.......\n" +
                ".............................................................................................................................................\n" +
                "......^...^...^.^.^.^...^.^.^.^.^...^...........^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^...........^.^...............^.^.^.^.^.^.^...^.^.^......\n" +
                ".............................................................................................................................................\n" +
                ".....^.....^...^.^.^.^.^.^.....^...^...^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.....^...^.^.^.......^.^.^.^.^.^.^.^.....\n" +
                ".............................................................................................................................................\n" +
                "....^.....^.^.^...^...^.^.....^.^.....^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^...^.^.^.^...^.^...^.^...^...^.^...^...^.^....\n" +
                ".............................................................................................................................................\n" +
                "...^.^.^.^.^.^.^.....^...^...^.^.......^.^.^.^.....^.^...^.^.^.^.^...^.^...........^.^.^.^.^...^.^.^...^...^.^.......^.^.^.^.^.^.^.....^.^...\n" +
                ".............................................................................................................................................\n" +
                "..^.^.^.^...^.^.^.^.^.^.^.^.....^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.........^.^.^.^...^.^.^.^.......^.^.^.^...^...^.....^.^..\n" +
                ".............................................................................................................................................\n" +
                ".^.^.^.^.^.^.^.^.^...^.^.....^.^.^...^.^.....^...^.^.^...^...^...^.^.^...^.^.^.....^.^...^...^...^...^...^.^.^.^...^.^.^...^.^.^...^...^.^.^.\n" +
                ".............................................................................................................................................";

        String[] ss = s.split("\n");

        int k = 0;

        Set<Integer> points = new HashSet<>();

        for (int i = 0; i < ss[0].length(); i++) {
            if (ss[0].charAt(i) == 'S') {
                points.add(i);
                break;
            }
        }

        int i = 1;
        while (i< ss.length) {
            Set<Integer> roints = new HashSet<>();
            for (int p : points) {
                if (ss[i].charAt(p) == '^') {
                    if (p>=0) {
                        roints.add(p - 1);
                    }
                    if (p<ss[i].length()) {
                        roints.add(p + 1);
                    }
                    k++;
                } else {
                    roints.add(p);
                }

            }
            points.clear();
            points.addAll(roints);
            i++;
        }

        System.out.println(k);

    }
}
