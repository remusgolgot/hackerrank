package adventofcode.aoc2025.day7;

import java.util.*;

/**
 * https://adventofcode.com/2025/day/7
 */
public class Main2 {

    public static void main(String[] args) {

        String t =
                ".......S.......\n" +
                        "...............\n" +
                        ".......^.......\n" +
                        "...............\n" +
                        "......^.^......\n" +
                        "...............\n" +
                        ".....^.^.^.....\n" +
                        "...............\n" +
                        "....^.^...^....\n" +
                        "...............\n" +
                        "...^.^...^.^...\n" +
                        "...............\n" +
                        "..^...^.....^..\n" +
                        "...............\n" +
                        ".^.^.^.^.^...^.\n" +
                        "...............";

        String s = "......................................................................S......................................................................\n" +
                ".............................................................................................................................................\n" +
                "......................................................................^......................................................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................................................^.^.....................................................................\n" +
                ".............................................................................................................................................\n" +
                "....................................................................^...^....................................................................\n" +
                ".............................................................................................................................................\n" +
                "...................................................................^.^.^.^...................................................................\n" +
                ".............................................................................................................................................\n" +
                "..................................................................^.^.^.^.^..................................................................\n" +
                ".............................................................................................................................................\n" +
                ".................................................................^.^.^.^.^.^.................................................................\n" +
                ".............................................................................................................................................\n" +
                "................................................................^.^.^.....^.^................................................................\n" +
                ".............................................................................................................................................\n" +
                "...............................................................^.^.^.^...^.^.^...............................................................\n" +
                ".............................................................................................................................................\n" +
                "..............................................................^.^.^...^...^.^.^..............................................................\n" +
                ".............................................................................................................................................\n" +
                ".............................................................^...^.....^...^.^.^.............................................................\n" +
                ".............................................................................................................................................\n" +
                "............................................................^.^.....^.^...^.^.^.^............................................................\n" +
                ".............................................................................................................................................\n" +
                "...........................................................^.^...^...^.^.^.^.^.^.^...........................................................\n" +
                ".............................................................................................................................................\n" +
                "..........................................................^.^...^.^.^.^.^.^.^.^.^.^..........................................................\n" +
                ".............................................................................................................................................\n" +
                ".........................................................^.^.^.^.....^.^.^.^.....^.^.........................................................\n" +
                ".............................................................................................................................................\n" +
                "........................................................^.^.^.^.....^.^.^.^.^.....^.^........................................................\n" +
                ".............................................................................................................................................\n" +
                ".......................................................^.^.^.^.^.^.^.^.^...^.....^...^.......................................................\n" +
                ".............................................................................................................................................\n" +
                "......................................................^.^...^...^.....^...^...^.^.....^......................................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................................^.^.^...^.^.....^.^.^.^...^.^.^.^.^.....................................................\n" +
                ".............................................................................................................................................\n" +
                "....................................................^.^.^.^...^.^.^.^.............^.^.^.^....................................................\n" +
                ".............................................................................................................................................\n" +
                "...................................................^.^.^.^.^.^...^.^.^.^.....^.^.^.^.^.^.^...................................................\n" +
                ".............................................................................................................................................\n" +
                "..................................................^...^...^.....^.......^.^.^...^...^.^.^.^..................................................\n" +
                ".............................................................................................................................................\n" +
                ".................................................^...^...^.^.^.^.^...^...........^.^.^.....^.................................................\n" +
                ".............................................................................................................................................\n" +
                "................................................^.^.^.^.^.^.^.^...^...^...^...^.^.^.....^.^.^................................................\n" +
                ".............................................................................................................................................\n" +
                "...............................................^.^...^.^...^.^.^...^...^.^.....^.^.^.^.^.....^...............................................\n" +
                ".............................................................................................................................................\n" +
                "..............................................^.^.^.^.^.^...^...^...^.^.^.^...^.^.^.^.......^.^..............................................\n" +
                ".............................................................................................................................................\n" +
                ".............................................^.^.^.^...^.^.^.^...^.^...^...^...^...^.....^.^.^.^.............................................\n" +
                ".............................................................................................................................................\n" +
                "............................................^.^...^...^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^.^.^............................................\n" +
                ".............................................................................................................................................\n" +
                "...........................................^.^...^.^.^.^.^.^...^...^...^...^...^.^...^.^.^.^...^.^...........................................\n" +
                ".............................................................................................................................................\n" +
                "..........................................^.^.^...^.^.^.^...^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^..........................................\n" +
                ".............................................................................................................................................\n" +
                ".........................................^.^.......^...^.....^...^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.........................................\n" +
                ".............................................................................................................................................\n" +
                "........................................^.^...^.^...^...^.^.^.^.^.....^.....^.^.^.^.^.....^...^.^...^........................................\n" +
                ".............................................................................................................................................\n" +
                ".......................................^.^.^.^.^.^.^.^.^.^.^...^...^.^...^.^...^...^.^.......^.....^.^.......................................\n" +
                ".............................................................................................................................................\n" +
                "......................................^...^.^.^.^.....^...^.........^.^...^.^.^...^.^...^.^.^.^.^.^...^......................................\n" +
                ".............................................................................................................................................\n" +
                ".....................................^.^...^.^.^.^.......^.^.....^.^.^.^.^.^.^...^.^.....^.....^.^...^.^.....................................\n" +
                ".............................................................................................................................................\n" +
                "....................................^...^...^.....^...^.^.^...^.^.^.^.^.^.^.......^.....^.^.^.^...^...^.^....................................\n" +
                ".............................................................................................................................................\n" +
                "...................................^.^.^.^...^...^.^...^.^.^...^.....^.^...^.^...^.^.^...^...^.^.^.^.^...^...................................\n" +
                ".............................................................................................................................................\n" +
                "..................................^.^.^.^.^...^.^.^.^.^.^.^.^...^...^...^.^.....^.^.^...^.^...^.^.....^.^.^..................................\n" +
                ".............................................................................................................................................\n" +
                ".................................^...^.........^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.......^.^.^.....^.^.^.^.................................\n" +
                ".............................................................................................................................................\n" +
                "................................^.^.^...^...^...^.^.^.^...^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^................................\n" +
                ".............................................................................................................................................\n" +
                "...............................^.^...^.^.^.^.^.^...^.^.^...^...^...^.^.^.....^...^...^.^.....^.^...^.^.....^.^...............................\n" +
                ".............................................................................................................................................\n" +
                "..............................^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.^...^...^.....^.....^.....^..............................\n" +
                ".............................................................................................................................................\n" +
                ".............................^.^.^.^.^.^.^...^.^.^.^.^.....^.^.^.....^.^.^.^.....^...^...^.^.^...^.^.^.^.....^.^.............................\n" +
                ".............................................................................................................................................\n" +
                "............................^.^...^.^.^.^.^.^.^.^...^...^.^.^.^.^.....^.^.^.^.^...^.^.^.^...^.^.^...^...^.^.^...^............................\n" +
                ".............................................................................................................................................\n" +
                "...........................^...^...^.^...^.^.^...^.^...^.......^...^...^.^...^.^.^...^.^...^.^...^.^...^.^...^.^.^...........................\n" +
                ".............................................................................................................................................\n" +
                "..........................^.^...^.^...^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...^.^.........^...^.^...^.....^...^.^...^.^..........................\n" +
                ".............................................................................................................................................\n" +
                ".........................^.^.^.^.^...^.^.^.....^.^.......^.^.^...^...^.^...^.......^.^.^...^.^.^.....^.^.^.^.^.^...^.........................\n" +
                ".............................................................................................................................................\n" +
                "........................^.^.....^...^.^.^...^.^...^...^.^.^.^.^...^.^.^...^.^.^.^...^.^.....^.^.^.^.^.^...^.....^.^.^........................\n" +
                ".............................................................................................................................................\n" +
                ".......................^.^...^.^...^.^.^.^.....^...^...^...^.....^.^...^.^...^...^.^.^.^.^.^...^.......^.^.^.^.^...^.^.......................\n" +
                ".............................................................................................................................................\n" +
                "......................^.^.^.....^...^...^.^.^.^.....^.^...^.^.^.^.^...^...^.......^.^.^.^.........^.....^.^.^...^.^...^......................\n" +
                ".............................................................................................................................................\n" +
                ".....................^.^.^.....^...^.....^.^...^...^.....^.....^.^.^.^...^.^...^.^.^...^.^.^.^.^.^.^...^...^.^.^.^.....^.....................\n" +
                ".............................................................................................................................................\n" +
                "....................^.^.......^.^.^.....^...^...^...^.^.^.^.^...^.^...^.....^.^.^.^.^.....^...^.^...^.^.....^.^...^.^.^.^....................\n" +
                ".............................................................................................................................................\n" +
                "...................^...^.^.^.^.^.^.....^...^.^.^.^.^.....^...^...^.^.^.^...^.........^.^.....^...^...^.^.^.......^.^.^.^.^...................\n" +
                ".............................................................................................................................................\n" +
                "..................^.^.^.^.......^.^.^.^.^...^.^...^...^.^.......^.^.^.^.^.^...^.^.^.^.^...^.^.^...^.^.^...^.^...^.^.....^.^..................\n" +
                ".............................................................................................................................................\n" +
                ".................^.^...^.^.^.^.^...^.^.^.......^.^.^...^.^.^...^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.................\n" +
                ".............................................................................................................................................\n" +
                "................^...^.^.^...^.^.....^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.......^...^.^.^.^.^...^...^.^.^...^...^...^.^.......^................\n" +
                ".............................................................................................................................................\n" +
                "...............^.^.^...^.^.^.^.^.......^.^.^.^.^.^.^...^.^.^.^.^.^.^.......^.......^.....^.^.^...^...^...^...^.^.^.^.^.^.^.^.^...............\n" +
                ".............................................................................................................................................\n" +
                "..............^...^.^.^...^.^.^.^.......^.....^.^...^.^.^.^.^.^.^.^...^.................^.^.^.^...^.^.^.^.......^.^.^...^...^.^..............\n" +
                ".............................................................................................................................................\n" +
                ".............^.^.^.^.........^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^...^.^...^.^.^.^...^.^.^.^.............\n" +
                ".............................................................................................................................................\n" +
                "............^.^.^.^...^.^...^.^...^.^...^.^.^.^...^.......^.^...^...^.^...^.^...^...^.^.^.^...^.......^.^...^...^.......^.^.^.^.^............\n" +
                ".............................................................................................................................................\n" +
                "...........^...^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.....^...^.....^.^.^.^.^.^.^.^.....^.....^.^.^.^.^.^.^.^.^...^...^.^.....^.^.^.^...........\n" +
                ".............................................................................................................................................\n" +
                "..........^.^...^.^.....^...^.^.^.^...^.^.^.^.^.^...^.^...^.^.......^.....^.........^.^.^.......^...^.^.^.......^...^.^...^.^.^.^.^..........\n" +
                ".............................................................................................................................................\n" +
                ".........^.^.^.^.^...^...^.^.......^.^.^.^.^.^...^.^.^.^.^.^.^...^...^...^.^.^.^.....^.^.^.^...^.^.^...^.^.^.^.^.^...^.^.^.....^...^.........\n" +
                ".............................................................................................................................................\n" +
                "........^.^.........^.^.^...^.^.....^.....^.^.^.^.^.^.....^...^.^.^.^.......^...^...^.^.^.....^...^.^.^.^.^.....^.^.^.^.^.^...^...^.^........\n" +
                ".............................................................................................................................................\n" +
                ".......^.^.^.^.^.^.^...^.^...^.^.^.^...^...^...^...^.^...^.^.^.^...^.^...^.....^.^.^...^...^.^.....^.^.^.^.^.....^.....^.^...^.^.^...^.......\n" +
                ".............................................................................................................................................\n" +
                "......^...^...^.^.^.^...^.^.^.^.^...^...........^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^...........^.^...............^.^.^.^.^.^.^...^.^.^......\n" +
                ".............................................................................................................................................\n" +
                ".....^.....^...^.^.^.^.^.^.....^...^...^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.....^...^.^.^.......^.^.^.^.^.^.^.^.....\n" +
                ".............................................................................................................................................\n" +
                "....^.....^.^.^...^...^.^.....^.^.....^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^...^.^.^.^...^.^...^.^...^...^.^...^...^.^....\n" +
                ".............................................................................................................................................\n" +
                "...^.^.^.^.^.^.^.....^...^...^.^.......^.^.^.^.....^.^...^.^.^.^.^...^.^...........^.^.^.^.^...^.^.^...^...^.^.......^.^.^.^.^.^.^.....^.^...\n" +
                ".............................................................................................................................................\n" +
                "..^.^.^.^...^.^.^.^.^.^.^.^.....^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.........^.^.^.^...^.^.^.^.......^.^.^.^...^...^.....^.^..\n" +
                ".............................................................................................................................................\n" +
                ".^.^.^.^.^.^.^.^.^...^.^.....^.^.^...^.^.....^...^.^.^...^...^...^.^.^...^.^.^.....^.^...^...^...^...^...^.^.^.^...^.^.^...^.^.^...^...^.^.^.\n" +
                ".............................................................................................................................................";

        String[] ss = s.split("\n");

        int k = 0;

        for (int i = 0; i < ss[0].length(); i++) {
            if (ss[0].charAt(i) == 'S') {
                k = i;
                break;
            }
        }
        Map<Integer, Long> maps = new HashMap<>();
        Map<Integer, Long> aux = new HashMap<>();
        maps.put(k, 1L);
        int i = 1;
        while (i < ss.length) {
            aux.clear();
            aux.putAll(maps);
            for (int p : aux.keySet()) {
                if (ss[i].charAt(p) == '^') {
                    Long i1 = maps.get(p - 1);
                    if (i1 == null) i1 = 0l;
                    Long i2 = maps.get(p + 1);
                    if (i2 == null) i2 = 0l;
                    maps.put(p - 1, i1 + maps.get(p));
                    maps.put(p + 1, i2 + maps.get(p));
                    maps.remove(p);
                }
            }
            System.out.println("line = " + i);
            i++;
        }

        long sum =0;
        for (int p : maps.keySet()) {
            sum += maps.get(p);
        }
        System.out.println(sum);
    }
}
